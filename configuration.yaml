###############################################################
## House Main Configuration
################################################################

homeassistant:
  # # Name of the location where Home Assistant is running
  # name: House
  # # Location required to calculate the time the sun rises and sets
  # latitude: !secret latitude
  # longitude: !secret longitude
  # # Impacts weather/sunrise data (altitude above sea level in meters)
  # elevation: 175.87
  # # metric for Metric, imperial for Imperial
  # unit_system: imperial
  # # Pick yours from here: http://en.wikipedia.org/wiki/List_of_tz_database_time_zones
  # time_zone: America/Chicago

  # Packages directory
  packages: !include_dir_named packages

  customize:
    ################################################
    #  unhide the all_* groups
    ################################################
    group.all_scripts:
      control: hidden
      hidden: false

    group.all_automations:
      control: hidden
      hidden: false

    group.all_scenes:
      control: hidden
      hidden: false

    group.all_lights:
      control: hidden
      hidden: false

    group.all_switches:
      control: hidden
      hidden: false

    group.all_fans:
      control: hidden
      hidden: false

    group.all_covers:
      control: hidden
      hidden: false

    group.all_devices:
      control: hidden
      hidden: false

# Enable person tracking
person:

# Enables the cloud
cloud:

# Enables the frontend
frontend:

# Enables configuration UI
config:

# Enables Lovelace YAML
lovelace:
  mode: yaml

# Setup html access
# http:
#   base_url: !secret ha_url
#   ssl_certificate: /ssl/fullchain.pem
#   ssl_key: /ssl/privkey.pem

# enable system health
system_health:

# Checks for available updates
updater:
  # Optional, allows Home Assistant developers to focus on popular components.
  include_used_components: true

# Prevent discovery of some devices
discovery:
  ignore:
   - samsung_tv
   - apple_tv
   - directv
   - plex_mediaserver
   - google_cast
   - roku
   - igd

# Live streams
stream:

# Allows you to issue voice commands from the frontend in enabled browsers
conversation:

# Track the sun
sun:

# enable Haiku with SenseMe ceiling fans
senseme:
  max_number_fans: 2
  include:
    - name: "Studio Vault Fan"
      friendly_name: "Studio Fan"
      has_light: true
#exclude:
  #  - "Studio Beam Fan"

# Enable nest
nest:
  client_id: !secret nest_client_id
  client_secret: !secret nest_client_secret

# House ISY-994i integration
isy994:
  host: http://192.168.1.203:80
  username: !secret isy_username
  password: !secret isy_password
  enable_climate: false

# Enable influx configuration
influxdb:
  host: 192.168.1.200
  port: 8086
  database: homeassistant
  username: homeassistant
  password: !secret influxdb_password
  max_retries: 3
  default_measurement: state

# Enable MQTT Sharing between Hassio instances.
# This is a client to the hosting instance.
mqtt_shareclient:
  base_topic: hass_share

# Google Text to Speech
tts:
  - platform: google_translate
    service_name: google_say

# device_tracker:
#   # Unifi device tracker configuration
#   - platform: unifi
#     host: 192.168.1.2
#     username: !secret unifi_username
#     password: !secret unifi_password
#     verify_ssl: false
#     interval_seconds: 10
#     consider_home: 300
#     track_new_devices: no

# Log Severities: notset, debug, info, warn, warning, error, fatal, critical
logger:
  default: error
  logs:
    homeassistant.components.mqtt: warning
    custom_components.senseme: error

# recorder configuration
recorder:
  # db_url:  mysql://hass:hasspassword@192.168.1.200/homeassistant
  purge_keep_days: 2
  purge_interval: 1
  exclude:
    domains:
      - automation
      - weblink
      - updater
    entities:
      - sun.sun
      - sensor.date

# # Z-Wave
# zwave:
#   usb_path: /dev/ttyACM0
#   network_key: "0xD2, 0x7D, 0x39, 0xC0, 0xD0, 0xE4, 0xA5, 0x81, 0xEF, 0x91, 0x76, 0x67, 0x37, 0xB5, 0xF0, 0xE0"

# sensor:
#   - platform: yr
#   # temperature of Hassio Raspberri Pi
#   - platform: command_line
#     name: Hassio House Temperature
#     command: "cat /sys/class/thermal/thermal_zone0/temp"
#     # If errors occur, remove degree symbol below
#     unit_of_measurement: "Â°C"
#     scan_interval: 60
#     value_template: '{{ value | multiply(0.001) | round(1) }}'

input_boolean:
  talk_studio:

automation:
  - id: talk_studio_changed
    alias: Talk Studio Changed
    trigger:
      platform: state
      entity_id: input_boolean.talk_studio
    action:
      - service: script.sonos_studio_say
        data:
          volume: 0.5
          delay: '00:00:02'
          message: 'Talk Studio'
